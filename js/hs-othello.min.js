var gameData,gameVue,cellCount=64,offsetBase=Math.sqrt(cellCount);function init(){resetGameData(),placeInitialStones()}function resetGameData(){gameData={turn:1,cells:[],offsets:[1,offsetBase-1,offsetBase,offsetBase+1,-1,-1*(offsetBase-1),-1*offsetBase,-1*(offsetBase+1)],stones:["O","X"],isFlipped:!1,counts:[2,2]}}function placeInitialStones(){for(var t=0;t<cellCount;t++)switch(t){case cellCount/2-offsetBase/2-1:case cellCount/2+offsetBase/2:gameData.cells.push(gameData.stones[1]);break;case cellCount/2-offsetBase/2:case cellCount/2+offsetBase/2-1:gameData.cells.push(gameData.stones[0]);break;default:gameData.cells.push("")}}document.addEventListener("DOMContentLoaded",function(){init(),gameVue=new Vue({el:"#app",data:gameData,methods:{play:function(t){if(!this.isGameOver&&!this.cells[t]){this.isFlipped=!1;for(var s=0;s<this.offsets.length;s++){var e=this.checkFlippable(t,this.offsets[s]);this.flipStones(e)}this.isFlipped&&(Vue.set(this.cells,t,this.currentStone),Vue.set(this.counts,this.turn,++this.counts[this.turn]),this.changeTurn())}},checkFlippable:function(t,s){for(var e=t,n=[];!(cellCount<=(e+=s)||e<0);){var i=this.cells[e];if(!i)break;if(i===this.currentStone){if(n.length)return n;break}if(n.push(e),8!==s&&-8!==s&&(e%8==0||e%8==7))break}return null},flipStones:function(t){if(null!==t&&t.length){for(var s=0;s<t.length;s++)Vue.set(this.cells,t[s],this.currentStone),Vue.set(this.counts,this.turn,++this.counts[this.turn]),Vue.set(this.counts,1-this.turn,--this.counts[1-this.turn]);this.isFlipped=!0}},changeTurn:function(){this.turn=this.turn?0:1,this.isPass()&&(this.turn=this.turn?0:1)},isPass:function(){if(this.isGameOver)return!1;for(var t=0;t<this.cells.length;t++)if(!this.cells[t])for(var s=0;s<this.offsets.length;s++)if(null!==this.checkFlippable(t,this.offsets[s]))return!1;return!0},startNewGame:function(){confirm("Start new game?")&&(resetGameData(),Object.assign(this.$data,gameData),placeInitialStones())}},computed:{currentStone:function(){return this.stones[this.turn]},isGameOver:function(){return!this.counts[0]||!this.counts[1]||this.counts[0]+this.counts[1]===cellCount},result:function(){var t=this.counts[0]-this.counts[1];return 0==t?"It's a draw":0<t?this.stones[0]+" wins!":this.stones[1]+" wins!"}}})});